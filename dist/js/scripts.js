const pokemonRepository=function(){const t=[],o=$("#pokemon-modal").hide(),n=($("ul"),"https://pokeapi.co/api/v2/pokemon/?limit=150");function e(t){pokemonRepository.loadDetails(t).then(function(){s(t)})}function i(o){t.push(o)}const a=t=>{$(t.target).closest("#pokemon-modal").length||l()},c=t=>{"Escape"===t.key&&o.hasClass("in")&&l()};function s(t){$("#pokemon-name").text(t.name.charAt(0).toUpperCase()+t.name.slice(1)),$("#pokemon-image").attr("src",t.imageUrl),$("#pokemon-height").text("Height: "+t.height+"m"),$("#pokemon-weight").text("Weight: "+t.weight+"kg");$(window).on("click",a),$(window).on("keydown",c)}function l(){o.modal("hide")}return{add:i,getAll:function(){return t},addListItem:function(t){$('<button type="button" class="list-group-item list-group-item-action" data-toggle="modal" data-target="#pokemon-modal">').text(t.name).appendTo("#pokemonList").on("click",function(){e(t)})},showDetails:e,loadList:function(){return fetch(n).then(function(t){if(t.ok)return t.json();throw"Something went wrong when loading the list."}).then(function(t){t.results.forEach(function(t){i({name:t.name,detailsUrl:t.url})})}).catch(function(t){console.error(t)})},loadDetails:function(t){const o=t.detailsUrl;return fetch(o).then(function(t){if(t.ok)return t.json();throw"Something went wrong when loading details."}).then(function(o){t.imageUrl=o.sprites.front_default,t.height=o.height,t.weight=o.weight}).catch(function(t){console.error(t)})},showModal:s,hideModal:l}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})});
